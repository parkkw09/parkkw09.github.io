# 기술기록(도커)

[![GPL2](https://img.shields.io/badge/license-GPL2-yellowgreen.svg)](https://github.com/parkkw09/parkSync/edit/master/LICENSE)

```
#docker 7
오늘은 목표는 빌드를 해보는 것이다.
만약 내가 깃헙을 쓰고 있고 별도의 머신으로 작동시킨 젠킨스였다면
어떻게 보면 금방 끝났을 것 같기도 하다.
젠킨스LTS 이미지를 컨테이너로 만들어서 보면 기본적으로
자바8(오픈자바)가 깔려있고 젠킨스 자체는 WAR이며 톰캣같은 별도의 서버없이
젠킨스에서 만들어진 스크립트로 직접 가동이 된다.(결국 jar on)
인터넷에 널려 있는 자료를 보니 GIT, Gradle, Android-SDK를 셋업하고
작업을 만들어서 빌드하면 끝인데 문제는 우리 프로젝트는
Gitlap, Githup 이런거 없이 그냥 순수 git server만 사용하기 때문에
SSH로 접근을 한다.(액세스 토큰 이런거 안됨.)
이걸 위해 젠킨스 서버를 내컴과 동일한 키를 사용하는 서버로 둔갑? 시키고
그래들 설정하고 빌드를 시도하니 maven주소가 겹치면 제대로 작동을 안했다.
이를 정리하고 작동을 하니 빌드할때마다 에러가 달라서
도커머신 램을 늘려보았다.
되었다.
램이 소중함을 다시 느끼는 순간이었다.
이제 구글 드라이브에 올리고 슬랙 연동을 하려고 하니
이게 왠걸 구글 드라이브 업로드에 관한 공식 자료가 없다.
(덕분에 메이븐 빌드도 해보고 젠킨스 플러그인을 직접 만들어서 설치도 ㅎㅎ)
일단 오늘은 여기까지 한다.
2019.09.24
```

```
#docker 6
이것저것 자료를 찾다보면 도커 허브에 있는 젠킨스 공식 이미지가 1년이 넘었다는 것
WAR를 가동시켜도 에센셜 설치에서 죄다 에러난다는거.
그래서 대부분 알려주는 자료는 WAR을 미러 사이트에서 직접 받으라는 것과
LTS 버전의 젠킨스를 이용하라는 것이다.
WAR을 교체하기 위해 미러사이트를 확인하다가 혹시나 해서 도커 허브를 다시 보았는데
공식 이미지 바로 밑에 jenkins/jenkins:lts 라는 이름으로 존재하더라.
결국 작업 시작화면까지 봤다. 야호.

오늘의 요약
docker run -d -p 8080:8080 -v ~/Downloads/jenkins:/var/jenkins --name jenkins -u root jenkins/jenkins:lts
docker exec -it -u 0 jenkins /bin/bash
docker ps -a
docker rm
docker rmi
docker images
docker logs
docker stop
docker pull
HOST:CLIENT
-u 0 == -u root
이정도만 응용할줄 알면 그냥 켤순 있음.
2019.09.23
```

```
#docker 5
몇번 두드려 보니 컨테이너 만들고 작동시키는 것이 생각 났다.
처음 젠킨스를 가동시키고 설정하는 부분에서 에센셜 설치가 있는데
여기서 에러가 났다....
잠시 쉬어야 겠다.
2019.09.23
```

```
#docker 4
원래 이것저것 할일이 많지만 2주정도는 느긋하게 보내도 되는 시기이다.
그래서 회사맥에 도커를 설치하고 있다. 목표는 젠킨스로 자동화 빌드를 구성하고
빌드된 스냅샷을 구글 드라이브로 업로드하고
슬랙에 노티를 던지는 것이다.
이걸 그대로 윈도우 컴터에서 다시 가동시켜서
무한 빌드 머신으로 만든다. 하하하하하하하하하하하하
2019.09.23
```

```
#docker 3
형이 미안해. 곧 관심가져 줄께. 언젠간 젠킨스 설치 시작해볼 날이 올꺼야.
2019.08.23
```

```
#docker 2
컨테이너를 만들어서 블라블라 SSH 셋업 하고 컨테이너를 이미지로 만들어서 허브.도커에 올리고
다른 컴터로 가서 그걸 내려받아 컨테이너로 만들고 작동시켜서 ssh 접속 까지 확인하였다.
와우 드디어 개인 이미지 생성 ! 문제는 이게 기억이 남으려나 엄청 복잡한데 ㅎㅎㅎㅎ
git 쓸줄 알고 cli에 익숙하면 금방할 것 같으나 본업이 아니므로 계속 기억하고 있을 수가 있을지 의문 ㅠ
2019.03.05
```

```
#docker 1
음... 아쉬운대로 윈도우에 설치를 했더니 버추얼박스를 컨테이너로 사용한다고 한다....
음.... 버추얼박스랑 다른게 뭐죠?
컨테이너를 처음 가져왔을 때 느낌은 #배틀그라운드 처음 시작했을 때 느낌이구나.
2019.02.19
```
