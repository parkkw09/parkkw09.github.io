---
layout: post
title: "M1에서 Jekyll 돌리기"
author: "Peter Park"
categories: discovery
tags: [discovery,jekyll,ruby,homebrew]
image: view-0002.jpg
---

깃헙 블로그를 만들고 난 이후 나는 주로 VSCODE 와 RUBY JEKYLL 로 관리를 한다. 지킬 서버를 사용하게 되면 작업된 마크다운 포스트를 실시간으로 로컬 브라우저에서 볼수있기 때문에 아주 편리하다.

처음 작업은 인텔맥에서 진행을 했다. 인터넷에 널린 블로그 보고 따라하면 그만이어서 그 원리를 파악하는데 시간이 좀 걸렸을 뿐 이건 일도 아니다.

그러던 어제, 난 내 노트북으로 이식을 시작했다. 노트북에서도 당연히 그냥 시원하게 작동될줄 알았으나... 이게 왠걸 루비가 정상적으로 작동하지 않았다. 수 많은 시행착오가 있었으나 결론은 루비를 xcode에 들어있는 것을 쓰는데 이게 버전(2.6.0)이 너무 낮아서 제대로 동작하지 않았던 것이다. 정확하게는 arm64 환경에서 말이다.(인텔맥은 당연히 x86)

인터넷에서는 여러가지 방법을 제시한다. 그중 내가 선택한 방법은 rbenv를 이용하는 것이다.

rbenv는 일종의 루비 버전관리 툴이다.(형성관리아님.) 여러버전의 루비를 설치하고 스위칭 할 수 있게 도와주는데 이게 제일 속편했다.

순서는 다음과 같다.

1. rbenv 를 설치한다.
```
$ brew install rbenv ruby-build
```
2. ruby 를 설치한다.
```
$ rbenv global 2.7.5
$ rbenv rehash
```
3. 환경설정에 다음내용을 추가한다.(ex. .zprofile, .zshrc)
```
export PATH={$Home}/.rbenv/bin:$PATH && \
eval "$(rbenv init -)"
```
4. ruby 버전의 바뀌었는지 확인하고 기존 jekyll 절차대로 실행시킨다.
```
$ ruby --version
ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [arm64-darwin21]
```

번외로 인터넷을 찾아보면 터미널을 로제타로 실행시켜서 작동시키거나 홈브루에서 제공하는 루비를 사용해보라는 내용이 있으나 로제타로 켜는 것은 x86으로 강제로 돌리는 것이므로 챙겨야 할것들이 너무 많아지고 홈브루의 것은 패스 잡는게 애매하다.

근처에 모기가 있나.....